<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: ChunkyPNG::Color</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">ChunkyPNG::Color</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/lib/chunky_png/color_rb.html">
                lib/chunky_png/color.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
The <a href="Color.html">Color</a> module defines methods for handling
colors. Within the <a href="../ChunkyPNG.html">ChunkyPNG</a> library, the
concepts of pixels and colors are both used, and they are both represented
by <a href="Color.html#M000042">a</a> Integer.
</p>
<p>
Pixels/colors are represented in RGBA components. Each of the four
components is stored with <a href="Color.html#M000042">a</a> depth of 8
bits (maximum value = 255 = {ChunkyPNG::Color::MAX}). Together, these
components are stored in <a href="Color.html#M000042">a</a> 4-byte Integer.
</p>
<p>
A color will always be represented using these 4 components in memory. When
the image is encoded, <a href="Color.html#M000042">a</a> more suitable
representation can be used (e.g. <a href="Color.html#M000033">rgb</a>, <a
href="Color.html#M000034">grayscale</a>, palette-based), for which several
conversion methods are provided in this module.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000042">a</a>&nbsp;&nbsp;
      <a href="#M000056">alpha_decomposable?</a>&nbsp;&nbsp;
      <a href="#M000041">b</a>&nbsp;&nbsp;
      <a href="#M000051">blend</a>&nbsp;&nbsp;
      <a href="#M000050">compose</a>&nbsp;&nbsp;
      <a href="#M000049">compose_precise</a>&nbsp;&nbsp;
      <a href="#M000048">compose_quick</a>&nbsp;&nbsp;
      <a href="#M000057">decompose_alpha</a>&nbsp;&nbsp;
      <a href="#M000058">decompose_alpha_component</a>&nbsp;&nbsp;
      <a href="#M000059">decompose_alpha_components</a>&nbsp;&nbsp;
      <a href="#M000055">decompose_color</a>&nbsp;&nbsp;
      <a href="#M000054">fade</a>&nbsp;&nbsp;
      <a href="#M000038">from_hex</a>&nbsp;&nbsp;
      <a href="#M000036">from_rgb_stream</a>&nbsp;&nbsp;
      <a href="#M000037">from_rgba_stream</a>&nbsp;&nbsp;
      <a href="#M000046">fully_transparent?</a>&nbsp;&nbsp;
      <a href="#M000040">g</a>&nbsp;&nbsp;
      <a href="#M000034">grayscale</a>&nbsp;&nbsp;
      <a href="#M000045">grayscale?</a>&nbsp;&nbsp;
      <a href="#M000035">grayscale_alpha</a>&nbsp;&nbsp;
      <a href="#M000052">grayscale_teint</a>&nbsp;&nbsp;
      <a href="#M000065">html_color</a>&nbsp;&nbsp;
      <a href="#M000047">int8_mult</a>&nbsp;&nbsp;
      <a href="#M000044">opaque!</a>&nbsp;&nbsp;
      <a href="#M000043">opaque?</a>&nbsp;&nbsp;
      <a href="#M000031">parse</a>&nbsp;&nbsp;
      <a href="#M000070">pass_bytesize</a>&nbsp;&nbsp;
      <a href="#M000068">pixel_bitsize</a>&nbsp;&nbsp;
      <a href="#M000067">pixel_bytesize</a>&nbsp;&nbsp;
      <a href="#M000039">r</a>&nbsp;&nbsp;
      <a href="#M000033">rgb</a>&nbsp;&nbsp;
      <a href="#M000032">rgba</a>&nbsp;&nbsp;
      <a href="#M000066">samples_per_pixel</a>&nbsp;&nbsp;
      <a href="#M000069">scanline_bytesize</a>&nbsp;&nbsp;
      <a href="#M000053">to_grayscale</a>&nbsp;&nbsp;
      <a href="#M000064">to_grayscale_alpha_bytes</a>&nbsp;&nbsp;
      <a href="#M000063">to_grayscale_bytes</a>&nbsp;&nbsp;
      <a href="#M000060">to_hex</a>&nbsp;&nbsp;
      <a href="#M000061">to_truecolor_alpha_bytes</a>&nbsp;&nbsp;
      <a href="#M000062">to_truecolor_bytes</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">


    <div id="constants-list">
      <h3 class="section-bar">Constants</h3>

      <div class="name-list">
        <table summary="Constants">
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">MAX</td>
          <td>=</td>
          <td class="context-item-value">0xff</td>
          <td width="3em">&nbsp;</td>
          <td class="context-item-desc">
@return [Integer] The maximum value of each color component.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">HEX_COLOR_REGEXP</td>
          <td>=</td>
          <td class="context-item-value">/^(?:#|0x)?([0-9a-f]{6})([0-9a-f]{2})?$/i</td>
          <td width="3em">&nbsp;</td>
          <td class="context-item-desc">
@private @return [Regexp] The regexp to <a
href="Color.html#M000031">parse</a> hex color values.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">HTML_COLOR_REGEXP</td>
          <td>=</td>
          <td class="context-item-value">/^([a-z][a-z_ ]+[a-z])(?:\ ?\@\ ?(1\.0|0\.\d+))?$/i</td>
          <td width="3em">&nbsp;</td>
          <td class="context-item-desc">
@private @return [Regexp] The regexp to <a
href="Color.html#M000031">parse</a> named color values.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">PREDEFINED_COLORS</td>
          <td>=</td>
          <td class="context-item-value">{       :aliceblue =&gt; 0xf0f8ff00,       :antiquewhite =&gt; 0xfaebd700,       :aqua =&gt; 0x00ffff00,       :aquamarine =&gt; 0x7fffd400,       :azure =&gt; 0xf0ffff00,       :beige =&gt; 0xf5f5dc00,       :bisque =&gt; 0xffe4c400,       :black =&gt; 0x00000000,       :blanchedalmond =&gt; 0xffebcd00,       :blue =&gt; 0x0000ff00,       :blueviolet =&gt; 0x8a2be200,       :brown =&gt; 0xa52a2a00,       :burlywood =&gt; 0xdeb88700,       :cadetblue =&gt; 0x5f9ea000,       :chartreuse =&gt; 0x7fff0000,       :chocolate =&gt; 0xd2691e00,       :coral =&gt; 0xff7f5000,       :cornflowerblue =&gt; 0x6495ed00,       :cornsilk =&gt; 0xfff8dc00,       :crimson =&gt; 0xdc143c00,       :cyan =&gt; 0x00ffff00,       :darkblue =&gt; 0x00008b00,       :darkcyan =&gt; 0x008b8b00,       :darkgoldenrod =&gt; 0xb8860b00,       :darkgray =&gt; 0xa9a9a900,       :darkgrey =&gt; 0xa9a9a900,       :darkgreen =&gt; 0x00640000,       :darkkhaki =&gt; 0xbdb76b00,       :darkmagenta =&gt; 0x8b008b00,       :darkolivegreen =&gt; 0x556b2f00,       :darkorange =&gt; 0xff8c0000,       :darkorchid =&gt; 0x9932cc00,       :darkred =&gt; 0x8b000000,       :darksalmon =&gt; 0xe9967a00,       :darkseagreen =&gt; 0x8fbc8f00,       :darkslateblue =&gt; 0x483d8b00,       :darkslategray =&gt; 0x2f4f4f00,       :darkslategrey =&gt; 0x2f4f4f00,       :darkturquoise =&gt; 0x00ced100,       :darkviolet =&gt; 0x9400d300,       :deeppink =&gt; 0xff149300,       :deepskyblue =&gt; 0x00bfff00,       :dimgray =&gt; 0x69696900,       :dimgrey =&gt; 0x69696900,       :dodgerblue =&gt; 0x1e90ff00,       :firebrick =&gt; 0xb2222200,       :floralwhite =&gt; 0xfffaf000,       :forestgreen =&gt; 0x228b2200,       :fuchsia =&gt; 0xff00ff00,       :gainsboro =&gt; 0xdcdcdc00,       :ghostwhite =&gt; 0xf8f8ff00,       :gold =&gt; 0xffd70000,       :goldenrod =&gt; 0xdaa52000,       :gray =&gt; 0x80808000,       :grey =&gt; 0x80808000,       :green =&gt; 0x00800000,       :greenyellow =&gt; 0xadff2f00,       :honeydew =&gt; 0xf0fff000,       :hotpink =&gt; 0xff69b400,       :indianred =&gt; 0xcd5c5c00,       :indigo =&gt; 0x4b008200,       :ivory =&gt; 0xfffff000,       :khaki =&gt; 0xf0e68c00,       :lavender =&gt; 0xe6e6fa00,       :lavenderblush =&gt; 0xfff0f500,       :lawngreen =&gt; 0x7cfc0000,       :lemonchiffon =&gt; 0xfffacd00,       :lightblue =&gt; 0xadd8e600,       :lightcoral =&gt; 0xf0808000,       :lightcyan =&gt; 0xe0ffff00,       :lightgoldenrodyellow =&gt; 0xfafad200,       :lightgray =&gt; 0xd3d3d300,       :lightgrey =&gt; 0xd3d3d300,       :lightgreen =&gt; 0x90ee9000,       :lightpink =&gt; 0xffb6c100,       :lightsalmon =&gt; 0xffa07a00,       :lightseagreen =&gt; 0x20b2aa00,       :lightskyblue =&gt; 0x87cefa00,       :lightslategray =&gt; 0x77889900,       :lightslategrey =&gt; 0x77889900,       :lightsteelblue =&gt; 0xb0c4de00,       :lightyellow =&gt; 0xffffe000,       :lime =&gt; 0x00ff0000,       :limegreen =&gt; 0x32cd3200,       :linen =&gt; 0xfaf0e600,       :magenta =&gt; 0xff00ff00,       :maroon =&gt; 0x80000000,       :mediumaquamarine =&gt; 0x66cdaa00,       :mediumblue =&gt; 0x0000cd00,       :mediumorchid =&gt; 0xba55d300,       :mediumpurple =&gt; 0x9370d800,       :mediumseagreen =&gt; 0x3cb37100,       :mediumslateblue =&gt; 0x7b68ee00,       :mediumspringgreen =&gt; 0x00fa9a00,       :mediumturquoise =&gt; 0x48d1cc00,       :mediumvioletred =&gt; 0xc7158500,       :midnightblue =&gt; 0x19197000,       :mintcream =&gt; 0xf5fffa00,       :mistyrose =&gt; 0xffe4e100,       :moccasin =&gt; 0xffe4b500,       :navajowhite =&gt; 0xffdead00,       :navy =&gt; 0x00008000,       :oldlace =&gt; 0xfdf5e600,       :olive =&gt; 0x80800000,       :olivedrab =&gt; 0x6b8e2300,       :orange =&gt; 0xffa50000,       :orangered =&gt; 0xff450000,       :orchid =&gt; 0xda70d600,       :palegoldenrod =&gt; 0xeee8aa00,       :palegreen =&gt; 0x98fb9800,       :paleturquoise =&gt; 0xafeeee00,       :palevioletred =&gt; 0xd8709300,       :papayawhip =&gt; 0xffefd500,       :peachpuff =&gt; 0xffdab900,       :peru =&gt; 0xcd853f00,       :pink =&gt; 0xffc0cb00,       :plum =&gt; 0xdda0dd00,       :powderblue =&gt; 0xb0e0e600,       :purple =&gt; 0x80008000,       :red =&gt; 0xff000000,       :rosybrown =&gt; 0xbc8f8f00,       :royalblue =&gt; 0x4169e100,       :saddlebrown =&gt; 0x8b451300,       :salmon =&gt; 0xfa807200,       :sandybrown =&gt; 0xf4a46000,       :seagreen =&gt; 0x2e8b5700,       :seashell =&gt; 0xfff5ee00,       :sienna =&gt; 0xa0522d00,       :silver =&gt; 0xc0c0c000,       :skyblue =&gt; 0x87ceeb00,       :slateblue =&gt; 0x6a5acd00,       :slategray =&gt; 0x70809000,       :slategrey =&gt; 0x70809000,       :snow =&gt; 0xfffafa00,       :springgreen =&gt; 0x00ff7f00,       :steelblue =&gt; 0x4682b400,       :tan =&gt; 0xd2b48c00,       :teal =&gt; 0x00808000,       :thistle =&gt; 0xd8bfd800,       :tomato =&gt; 0xff634700,       :turquoise =&gt; 0x40e0d000,       :violet =&gt; 0xee82ee00,       :wheat =&gt; 0xf5deb300,       :white =&gt; 0xffffff00,       :whitesmoke =&gt; 0xf5f5f500,       :yellow =&gt; 0xffff0000,       :yellowgreen =&gt; 0x9acd3200</td>
          <td width="3em">&nbsp;</td>
          <td class="context-item-desc">
@return [Hash&lt;Symbol, Integer&gt;] All the predefined color names in
HTML.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">BLACK</td>
          <td>=</td>
          <td class="context-item-value">rgb(  0,   0,   0)</td>
          <td width="3em">&nbsp;</td>
          <td class="context-item-desc">
@return [Integer] Black pixel/color

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">WHITE</td>
          <td>=</td>
          <td class="context-item-value">rgb(255, 255, 255)</td>
          <td width="3em">&nbsp;</td>
          <td class="context-item-desc">
@return [Integer] White pixel/color

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">TRANSPARENT</td>
          <td>=</td>
          <td class="context-item-value">rgba(0, 0, 0, 0)</td>
          <td width="3em">&nbsp;</td>
          <td class="context-item-desc">
@return [Integer] Fully transparent pixel/color

</td>
        </tr>
        </table>
      </div>
    </div>



      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000042" class="method-detail">
        <a name="M000042"></a>

        <div class="method-heading">
          <a href="#M000042" class="method-signature">
          <span class="method-name">a</span><span class="method-args">(value)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the alpha channel value for the color value.
</p>
<p>
@param [Integer] value The color value. @return [Integer] A value between 0
and MAX.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000042-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000042-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 197</span>
197:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">a</span>(<span class="ruby-identifier">value</span>)
198:       <span class="ruby-identifier">value</span> <span class="ruby-operator">&amp;</span> <span class="ruby-value">0x000000ff</span>
199:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000056" class="method-detail">
        <a name="M000056"></a>

        <div class="method-heading">
          <a href="#M000056" class="method-signature">
          <span class="method-name">alpha_decomposable?</span><span class="method-args">(color, mask, bg, tolerance = 1)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Checks whether an alpha channel value can successfully be composed given
the resulting color, the mask color and <a href="Color.html#M000042">a</a>
background color, all of which should be opaque.
</p>
<p>
@param [Integer] color The color that was the result of compositing. @param
[Integer] mask The opaque variant of the color that was being composed
@param [Integer] bg The background color on which the color was composed.
@param [Integer] tolerance The decomposition tolerance level, <a
href="Color.html#M000042">a</a> value between 0 and 255. @return [Boolean]
True if the alpha component can be decomposed successfully. @see <a
href="Color.html#M000057">decompose_alpha</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000056-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000056-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 370</span>
370:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">alpha_decomposable?</span>(<span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>, <span class="ruby-identifier">tolerance</span> = <span class="ruby-value">1</span>)
371:       <span class="ruby-identifier">components</span> = <span class="ruby-identifier">decompose_alpha_components</span>(<span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>)
372:       <span class="ruby-identifier">sum</span> = <span class="ruby-identifier">components</span>.<span class="ruby-identifier">inject</span>(<span class="ruby-value">0</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-identifier">a</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">b</span> } 
373:       <span class="ruby-identifier">max</span> = <span class="ruby-identifier">components</span>.<span class="ruby-identifier">max</span> <span class="ruby-operator">*</span> <span class="ruby-value">3</span>
374:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">components</span>.<span class="ruby-identifier">max</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">255</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">components</span>.<span class="ruby-identifier">min</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">sum</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">tolerance</span> <span class="ruby-operator">*</span> <span class="ruby-value">3</span>) <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">max</span>
375:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000041" class="method-detail">
        <a name="M000041"></a>

        <div class="method-heading">
          <a href="#M000041" class="method-signature">
          <span class="method-name">b</span><span class="method-args">(value)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the blue-component from the color value.
</p>
<p>
@param [Integer] value The color value. @return [Integer] A value between 0
and MAX.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000041-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000041-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 189</span>
189:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">b</span>(<span class="ruby-identifier">value</span>)
190:       (<span class="ruby-identifier">value</span> <span class="ruby-operator">&amp;</span> <span class="ruby-value">0x0000ff00</span>) <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">8</span>
191:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000051" class="method-detail">
        <a name="M000051"></a>

        <div class="method-heading">
          <a href="#M000051" class="method-signature">
          <span class="method-name">blend</span><span class="method-args">(fg, bg)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Blends the foreground and background color by taking the average of the
components.
</p>
<p>
@param [Integer] fg The foreground color. @param [Integer] bg The
foreground color. @return [Integer] The blended color.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000051-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000051-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 304</span>
304:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">blend</span>(<span class="ruby-identifier">fg</span>, <span class="ruby-identifier">bg</span>)
305:       (<span class="ruby-identifier">fg</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">bg</span>) <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">1</span>
306:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000050" class="method-detail">
        <a name="M000050"></a>

        <div class="method-heading">
          <span class="method-name">compose</span><span class="method-args">(fg, bg)</span>
        </div>
      
        <div class="method-description">
          <p>
Alias for <a href="Color.html#M000048">compose_quick</a>
</p>
        </div>
      </div>

      <div id="method-M000049" class="method-detail">
        <a name="M000049"></a>

        <div class="method-heading">
          <a href="#M000049" class="method-signature">
          <span class="method-name">compose_precise</span><span class="method-args">(fg, bg)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Composes two colors with an alpha channel using floating point math.
</p>
<p>
This method uses more precise floating point math, but this precision is
lost when the result is converted back to an integer. Because it is slower
than the version based on integer math, that version is preferred.
</p>
<p>
@param [Integer] fg The foreground color. @param [Integer] bg The
foreground color. @return [Integer] The composited color. @see <a
href="Color.html#M000048">ChunkyPNG::Color#compose_quick</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000049-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000049-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 281</span>
281:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">compose_precise</span>(<span class="ruby-identifier">fg</span>, <span class="ruby-identifier">bg</span>)
282:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">fg</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">opaque?</span>(<span class="ruby-identifier">fg</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">fully_transparent?</span>(<span class="ruby-identifier">bg</span>)
283:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">bg</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">fully_transparent?</span>(<span class="ruby-identifier">fg</span>)
284:       
285:       <span class="ruby-identifier">fg_a</span>  = <span class="ruby-identifier">a</span>(<span class="ruby-identifier">fg</span>).<span class="ruby-identifier">to_f</span> <span class="ruby-operator">/</span> <span class="ruby-constant">MAX</span>
286:       <span class="ruby-identifier">bg_a</span>  = <span class="ruby-identifier">a</span>(<span class="ruby-identifier">bg</span>).<span class="ruby-identifier">to_f</span> <span class="ruby-operator">/</span> <span class="ruby-constant">MAX</span>
287:       <span class="ruby-identifier">a_com</span> = (<span class="ruby-value">1.0</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">fg_a</span>) <span class="ruby-operator">*</span> <span class="ruby-identifier">bg_a</span>
288: 
289:       <span class="ruby-identifier">new_r</span> = (<span class="ruby-identifier">fg_a</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">r</span>(<span class="ruby-identifier">fg</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">a_com</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">r</span>(<span class="ruby-identifier">bg</span>)).<span class="ruby-identifier">round</span>
290:       <span class="ruby-identifier">new_g</span> = (<span class="ruby-identifier">fg_a</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">g</span>(<span class="ruby-identifier">fg</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">a_com</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">g</span>(<span class="ruby-identifier">bg</span>)).<span class="ruby-identifier">round</span>
291:       <span class="ruby-identifier">new_b</span> = (<span class="ruby-identifier">fg_a</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">b</span>(<span class="ruby-identifier">fg</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">a_com</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">b</span>(<span class="ruby-identifier">bg</span>)).<span class="ruby-identifier">round</span>
292:       <span class="ruby-identifier">new_a</span> = ((<span class="ruby-identifier">fg_a</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">a_com</span>) <span class="ruby-operator">*</span> <span class="ruby-constant">MAX</span>).<span class="ruby-identifier">round</span>
293:       <span class="ruby-identifier">rgba</span>(<span class="ruby-identifier">new_r</span>, <span class="ruby-identifier">new_g</span>, <span class="ruby-identifier">new_b</span>, <span class="ruby-identifier">new_a</span>)
294:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000048" class="method-detail">
        <a name="M000048"></a>

        <div class="method-heading">
          <a href="#M000048" class="method-signature">
          <span class="method-name">compose_quick</span><span class="method-args">(fg, bg)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Composes two colors with an alpha channel using integer math.
</p>
<p>
This version is faster than the version based on floating point math, so
this compositing function is used by default.
</p>
<p>
@param [Integer] fg The foreground color. @param [Integer] bg The
foreground color. @return [Integer] The composited color. @see <a
href="Color.html#M000049">ChunkyPNG::Color#compose_precise</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000048-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000048-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 259</span>
259:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">compose_quick</span>(<span class="ruby-identifier">fg</span>, <span class="ruby-identifier">bg</span>)
260:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">fg</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">opaque?</span>(<span class="ruby-identifier">fg</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">fully_transparent?</span>(<span class="ruby-identifier">bg</span>)
261:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">bg</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">fully_transparent?</span>(<span class="ruby-identifier">fg</span>)
262:       
263:       <span class="ruby-identifier">a_com</span> = <span class="ruby-identifier">int8_mult</span>(<span class="ruby-value">0xff</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">a</span>(<span class="ruby-identifier">fg</span>), <span class="ruby-identifier">a</span>(<span class="ruby-identifier">bg</span>))
264:       <span class="ruby-identifier">new_r</span> = <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">a</span>(<span class="ruby-identifier">fg</span>), <span class="ruby-identifier">r</span>(<span class="ruby-identifier">fg</span>)) <span class="ruby-operator">+</span> <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">a_com</span>, <span class="ruby-identifier">r</span>(<span class="ruby-identifier">bg</span>))
265:       <span class="ruby-identifier">new_g</span> = <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">a</span>(<span class="ruby-identifier">fg</span>), <span class="ruby-identifier">g</span>(<span class="ruby-identifier">fg</span>)) <span class="ruby-operator">+</span> <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">a_com</span>, <span class="ruby-identifier">g</span>(<span class="ruby-identifier">bg</span>))
266:       <span class="ruby-identifier">new_b</span> = <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">a</span>(<span class="ruby-identifier">fg</span>), <span class="ruby-identifier">b</span>(<span class="ruby-identifier">fg</span>)) <span class="ruby-operator">+</span> <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">a_com</span>, <span class="ruby-identifier">b</span>(<span class="ruby-identifier">bg</span>))
267:       <span class="ruby-identifier">new_a</span> = <span class="ruby-identifier">a</span>(<span class="ruby-identifier">fg</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">a_com</span>
268:       <span class="ruby-identifier">rgba</span>(<span class="ruby-identifier">new_r</span>, <span class="ruby-identifier">new_g</span>, <span class="ruby-identifier">new_b</span>, <span class="ruby-identifier">new_a</span>)
269:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000057" class="method-detail">
        <a name="M000057"></a>

        <div class="method-heading">
          <a href="#M000057" class="method-signature">
          <span class="method-name">decompose_alpha</span><span class="method-args">(color, mask, bg)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Decomposes the alpha channel value given the resulting color, the mask
color and <a href="Color.html#M000042">a</a> background color, all of which
should be opaque.
</p>
<p>
Make sure to call {alpha_decomposable?} first to see if the alpha channel
value can successfully decomposed with <a href="Color.html#M000042">a</a>
given tolerance, otherwise the return value of this method is undefined.
</p>
<p>
@param [Integer] color The color that was the result of compositing. @param
[Integer] mask The opaque variant of the color that was being composed
@param [Integer] bg The background color on which the color was composed.
@return [Integer] The best fitting alpha channel, <a
href="Color.html#M000042">a</a> value between 0 and 255. @see
alpha_decomposable?
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000057-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000057-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 389</span>
389:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decompose_alpha</span>(<span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>)
390:       <span class="ruby-identifier">components</span> = <span class="ruby-identifier">decompose_alpha_components</span>(<span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>)
391:       (<span class="ruby-identifier">components</span>.<span class="ruby-identifier">inject</span>(<span class="ruby-value">0</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-identifier">a</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">b</span> } <span class="ruby-operator">/</span> <span class="ruby-value">3.0</span>).<span class="ruby-identifier">round</span>
392:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000058" class="method-detail">
        <a name="M000058"></a>

        <div class="method-heading">
          <a href="#M000058" class="method-signature">
          <span class="method-name">decompose_alpha_component</span><span class="method-args">(channel, color, mask, bg)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Decomposes an alpha channel for either the <a
href="Color.html#M000039">r</a>, <a href="Color.html#M000040">g</a> or <a
href="Color.html#M000041">b</a> color channel. @param [:<a
href="Color.html#M000039">r</a>, :<a href="Color.html#M000040">g</a>, :<a
href="Color.html#M000041">b</a>] channel The channel to decompose the alpha
channel from. @param [Integer] color The color that was the result of
compositing. @param [Integer] mask The opaque variant of the color that was
being composed @param [Integer] bg The background color on which the color
was composed. @return [Integer] The decomposed alpha value for the channel.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000058-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000058-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 400</span>
400:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decompose_alpha_component</span>(<span class="ruby-identifier">channel</span>, <span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>)
401:       ((<span class="ruby-identifier">send</span>(<span class="ruby-identifier">channel</span>, <span class="ruby-identifier">bg</span>) <span class="ruby-operator">-</span> <span class="ruby-identifier">send</span>(<span class="ruby-identifier">channel</span>, <span class="ruby-identifier">color</span>)).<span class="ruby-identifier">to_f</span> <span class="ruby-operator">/</span> 
402:           (<span class="ruby-identifier">send</span>(<span class="ruby-identifier">channel</span>, <span class="ruby-identifier">bg</span>) <span class="ruby-operator">-</span> <span class="ruby-identifier">send</span>(<span class="ruby-identifier">channel</span>, <span class="ruby-identifier">mask</span>)).<span class="ruby-identifier">to_f</span> <span class="ruby-operator">*</span> <span class="ruby-constant">MAX</span>).<span class="ruby-identifier">round</span>
403:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000059" class="method-detail">
        <a name="M000059"></a>

        <div class="method-heading">
          <a href="#M000059" class="method-signature">
          <span class="method-name">decompose_alpha_components</span><span class="method-args">(color, mask, bg)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Decomposes the alpha channels for the <a href="Color.html#M000039">r</a>,
<a href="Color.html#M000040">g</a> and <a href="Color.html#M000041">b</a>
color channel. @param [Integer] color The color that was the result of
compositing. @param [Integer] mask The opaque variant of the color that was
being composed @param [Integer] bg The background color on which the color
was composed. @return [Array&lt;Integer&gt;] The decomposed alpha values
for the <a href="Color.html#M000039">r</a>, <a
href="Color.html#M000040">g</a> and <a href="Color.html#M000041">b</a>
channels.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000059-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000059-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 410</span>
410:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decompose_alpha_components</span>(<span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>)
411:       [
412:         <span class="ruby-identifier">decompose_alpha_component</span>(<span class="ruby-identifier">:r</span>, <span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>),
413:         <span class="ruby-identifier">decompose_alpha_component</span>(<span class="ruby-identifier">:g</span>, <span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>),
414:         <span class="ruby-identifier">decompose_alpha_component</span>(<span class="ruby-identifier">:b</span>, <span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>)
415:       ]
416:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000055" class="method-detail">
        <a name="M000055"></a>

        <div class="method-heading">
          <a href="#M000055" class="method-signature">
          <span class="method-name">decompose_color</span><span class="method-args">(color, mask, bg, tolerance = 1)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Decomposes <a href="Color.html#M000042">a</a> color, given <a
href="Color.html#M000042">a</a> color, <a href="Color.html#M000042">a</a>
mask color and <a href="Color.html#M000042">a</a> background color. The
returned color will be <a href="Color.html#M000042">a</a> variant of the
mask color, with the alpha channel set to the best fitting value. This
basically is the reverse operation if alpha composition.
</p>
<p>
If the color cannot be decomposed, this method will return the fully
transparent variant of the mask color.
</p>
<p>
@param [Integer] color The color that was the result of compositing. @param
[Integer] mask The opaque variant of the color that was being composed
@param [Integer] bg The background color on which the color was composed.
@param [Integer] tolerance The decomposition tolerance level, <a
href="Color.html#M000042">a</a> value between 0 and 255. @return [Integer]
The decomposed color,<a href="Color.html#M000042">a</a> variant of the
masked color with the
</p>
<pre>
   alpha channel set to an appropriate value.
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000055-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000055-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 352</span>
352:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decompose_color</span>(<span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>, <span class="ruby-identifier">tolerance</span> = <span class="ruby-value">1</span>)
353:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">alpha_decomposable?</span>(<span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>, <span class="ruby-identifier">tolerance</span>)
354:         <span class="ruby-identifier">mask</span> <span class="ruby-operator">&amp;</span> <span class="ruby-value">0xffffff00</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">decompose_alpha</span>(<span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>)
355:       <span class="ruby-keyword kw">else</span>
356:         <span class="ruby-identifier">mask</span> <span class="ruby-operator">&amp;</span> <span class="ruby-value">0xffffff00</span>
357:       <span class="ruby-keyword kw">end</span>
358:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000054" class="method-detail">
        <a name="M000054"></a>

        <div class="method-heading">
          <a href="#M000054" class="method-signature">
          <span class="method-name">fade</span><span class="method-args">(color, factor)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Lowers the intensity of <a href="Color.html#M000042">a</a> color, by
lowering its alpha by <a href="Color.html#M000042">a</a> given factor.
@param [Integer] color The color to adjust. @param [Integer] factor Fade
factor as an integer between 0 and 255. @return [Integer] The faded color.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000054-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000054-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 333</span>
333:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fade</span>(<span class="ruby-identifier">color</span>, <span class="ruby-identifier">factor</span>)
334:       <span class="ruby-identifier">new_alpha</span> = <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">a</span>(<span class="ruby-identifier">color</span>), <span class="ruby-identifier">factor</span>)
335:       (<span class="ruby-identifier">color</span> <span class="ruby-operator">&amp;</span> <span class="ruby-value">0xffffff00</span>) <span class="ruby-operator">|</span> <span class="ruby-identifier">new_alpha</span>
336:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000038" class="method-detail">
        <a name="M000038"></a>

        <div class="method-heading">
          <a href="#M000038" class="method-signature">
          <span class="method-name">from_hex</span><span class="method-args">(hex_value, opacity = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates <a href="Color.html#M000042">a</a> color by converting it from <a
href="Color.html#M000042">a</a> string in hex notation.
</p>
<p>
It supports colors with (rrggbbaa) or without (rrggbb) alpha channel. <a
href="Color.html">Color</a> strings may include the prefix &quot;0x&quot;
or &quot;#&quot;.
</p>
<p>
@param [<a href="../String.html">String</a>] str The color in hex notation.
@return [Integer] The
</p>
<pre>
  converted color value.
</pre>
<p>
@param [Integer] opacity The opacity value for the color. Overrides any
</p>
<pre>
   opacity value given in the hex value if given.
</pre>
<p>
@return [Integer] The color value. @raise [ArgumentError] if the value
given is not <a href="Color.html#M000042">a</a> hex color notation.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000038-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000038-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 155</span>
155:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">from_hex</span>(<span class="ruby-identifier">hex_value</span>, <span class="ruby-identifier">opacity</span> = <span class="ruby-keyword kw">nil</span>)
156:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">HEX_COLOR_REGEXP</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">hex_value</span>
157:         <span class="ruby-identifier">base_color</span> = <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">hex</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">8</span>
158:         <span class="ruby-identifier">opacity</span>  <span class="ruby-operator">||=</span> <span class="ruby-identifier">$2</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">$2</span>.<span class="ruby-identifier">hex</span> <span class="ruby-operator">:</span> <span class="ruby-value">0xff</span>
159:         <span class="ruby-identifier">base_color</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">opacity</span>
160:       <span class="ruby-keyword kw">else</span> 
161:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Not a valid hex color notation: #{hex_value.inspect}!&quot;</span>
162:       <span class="ruby-keyword kw">end</span>
163:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000036" class="method-detail">
        <a name="M000036"></a>

        <div class="method-heading">
          <a href="#M000036" class="method-signature">
          <span class="method-name">from_rgb_stream</span><span class="method-args">(stream, pos = 0)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates <a href="Color.html#M000042">a</a> color by unpacking an <a
href="Color.html#M000033">rgb</a> triple from <a
href="Color.html#M000042">a</a> string.
</p>
<p>
@param [<a href="../String.html">String</a>] stream The string to load the
color from. It should be
</p>
<pre>
    at least 3 + pos bytes long.
</pre>
<p>
@param [Integer] pos The position in the string to load the triple from.
@return [Integer] The newly constructed color value.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000036-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000036-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 130</span>
130:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">from_rgb_stream</span>(<span class="ruby-identifier">stream</span>, <span class="ruby-identifier">pos</span> = <span class="ruby-value">0</span>)
131:       <span class="ruby-identifier">rgb</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">stream</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-node">&quot;@#{pos}C3&quot;</span>))
132:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000037" class="method-detail">
        <a name="M000037"></a>

        <div class="method-heading">
          <a href="#M000037" class="method-signature">
          <span class="method-name">from_rgba_stream</span><span class="method-args">(stream, pos = 0)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates <a href="Color.html#M000042">a</a> color by unpacking an <a
href="Color.html#M000032">rgba</a> triple from <a
href="Color.html#M000042">a</a> string
</p>
<p>
@param [<a href="../String.html">String</a>] stream The string to load the
color from. It should be
</p>
<pre>
     at least 4 + pos bytes long.
</pre>
<p>
@param [Integer] pos The position in the string to load the triple from.
@return [Integer] The newly constructed color value.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000037-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000037-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 140</span>
140:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">from_rgba_stream</span>(<span class="ruby-identifier">stream</span>, <span class="ruby-identifier">pos</span> = <span class="ruby-value">0</span>)
141:       <span class="ruby-identifier">rgba</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">stream</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-node">&quot;@#{pos}C4&quot;</span>))
142:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000046" class="method-detail">
        <a name="M000046"></a>

        <div class="method-heading">
          <a href="#M000046" class="method-signature">
          <span class="method-name">fully_transparent?</span><span class="method-args">(value)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns true if this color is fully transparent.
</p>
<p>
@param [Integer] value The color to test. @return [true, false] True if the
alpha channel equals 0.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000046-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000046-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 228</span>
228:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fully_transparent?</span>(<span class="ruby-identifier">value</span>)
229:       <span class="ruby-identifier">a</span>(<span class="ruby-identifier">value</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0x00000000</span>
230:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000040" class="method-detail">
        <a name="M000040"></a>

        <div class="method-heading">
          <a href="#M000040" class="method-signature">
          <span class="method-name">g</span><span class="method-args">(value)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the green-component from the color value.
</p>
<p>
@param [Integer] value The color value. @return [Integer] A value between 0
and MAX.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000040-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000040-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 181</span>
181:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">g</span>(<span class="ruby-identifier">value</span>)
182:       (<span class="ruby-identifier">value</span> <span class="ruby-operator">&amp;</span> <span class="ruby-value">0x00ff0000</span>) <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">16</span>
183:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000034" class="method-detail">
        <a name="M000034"></a>

        <div class="method-heading">
          <a href="#M000034" class="method-signature">
          <span class="method-name">grayscale</span><span class="method-args">(teint)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates <a href="Color.html#M000042">a</a> new color using <a
href="Color.html#M000042">a</a> <a href="Color.html#M000034">grayscale</a>
teint. @param [Integer] teint The <a
href="Color.html#M000034">grayscale</a> teint (0-255), will be used as <a
href="Color.html#M000039">r</a>, <a href="Color.html#M000040">g</a>, and <a
href="Color.html#M000041">b</a> value. @return [Integer] The newly
constructed color value.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000034-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000034-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 108</span>
108:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">grayscale</span>(<span class="ruby-identifier">teint</span>)
109:       <span class="ruby-identifier">teint</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">24</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">teint</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">16</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">teint</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">8</span> <span class="ruby-operator">|</span> <span class="ruby-value">0xff</span>
110:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000045" class="method-detail">
        <a name="M000045"></a>

        <div class="method-heading">
          <a href="#M000045" class="method-signature">
          <span class="method-name">grayscale?</span><span class="method-args">(value)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns true if this color is fully transparent.
</p>
<p>
@param [Integer] value The color to test. @return [true, false] True if the
<a href="Color.html#M000039">r</a>, <a href="Color.html#M000040">g</a> and
<a href="Color.html#M000041">b</a> component are equal.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000045-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000045-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 220</span>
220:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">grayscale?</span>(<span class="ruby-identifier">value</span>)
221:       <span class="ruby-identifier">r</span>(<span class="ruby-identifier">value</span>) <span class="ruby-operator">==</span> <span class="ruby-identifier">b</span>(<span class="ruby-identifier">value</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">b</span>(<span class="ruby-identifier">value</span>) <span class="ruby-operator">==</span> <span class="ruby-identifier">g</span>(<span class="ruby-identifier">value</span>)
222:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000035" class="method-detail">
        <a name="M000035"></a>

        <div class="method-heading">
          <a href="#M000035" class="method-signature">
          <span class="method-name">grayscale_alpha</span><span class="method-args">(teint, a)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates <a href="Color.html#M000042">a</a> new color using <a
href="Color.html#M000042">a</a> <a href="Color.html#M000034">grayscale</a>
teint and alpha value. @param [Integer] teint The <a
href="Color.html#M000034">grayscale</a> teint (0-255), will be used as <a
href="Color.html#M000039">r</a>, <a href="Color.html#M000040">g</a>, and <a
href="Color.html#M000041">b</a> value. @param [Integer] <a
href="Color.html#M000042">a</a> The opacity (0-255) @return [Integer] The
newly constructed color value.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000035-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000035-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 116</span>
116:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">grayscale_alpha</span>(<span class="ruby-identifier">teint</span>, <span class="ruby-identifier">a</span>)
117:       <span class="ruby-identifier">teint</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">24</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">teint</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">16</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">teint</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">8</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">a</span>
118:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000052" class="method-detail">
        <a name="M000052"></a>

        <div class="method-heading">
          <a href="#M000052" class="method-signature">
          <span class="method-name">grayscale_teint</span><span class="method-args">(color)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Calculates the <a href="Color.html#M000034">grayscale</a> teint of an RGB
color.
</p>
<p>
@param [Integer] color The color to convert. @return [Integer] The <a
href="Color.html#M000034">grayscale</a> teint of the input color, 0-255.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000052-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000052-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 312</span>
312:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">grayscale_teint</span>(<span class="ruby-identifier">color</span>)
313:       (<span class="ruby-identifier">r</span>(<span class="ruby-identifier">color</span>) <span class="ruby-operator">*</span> <span class="ruby-value">0</span><span class="ruby-value">.3</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">g</span>(<span class="ruby-identifier">color</span>) <span class="ruby-operator">*</span> <span class="ruby-value">0</span><span class="ruby-value">.59</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">b</span>(<span class="ruby-identifier">color</span>) <span class="ruby-operator">*</span> <span class="ruby-value">0</span><span class="ruby-value">.11</span>).<span class="ruby-identifier">round</span>
314:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000065" class="method-detail">
        <a name="M000065"></a>

        <div class="method-heading">
          <a href="#M000065" class="method-signature">
          <span class="method-name">html_color</span><span class="method-args">(color_name, opacity = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Gets <a href="Color.html#M000042">a</a> color value based on <a
href="Color.html#M000042">a</a> HTML color name.
</p>
<p>
The color name is flexible. E.g. <tt>&#8216;yellowgreen&#8216;</tt>,
<tt>&#8216;Yellow green&#8216;</tt>, <tt>&#8216;YellowGreen&#8216;</tt>,
<tt>&#8216;YELLOW_GREEN&#8216;</tt> and <tt>:yellow_green</tt> will all
return the same color value.
</p>
<p>
You can include <a href="Color.html#M000042">a</a> opacity level in the
color name (e.g. <tt>&#8216;red @ 0.5&#8216;</tt>) or give an explicit
opacity value as second argument. If no opacity value is given, the color
will be fully opaque.
</p>
<p>
@param [Symbol, <a href="../String.html">String</a>] color_name The color
name. It may include an opacity specifier
</p>
<pre>
  like &lt;tt&gt;@ 0.8&lt;/tt&gt; to set the color's opacity.
</pre>
<p>
@param [Integer] opacity The opacity value for the color between 0 and 255.
Overrides
</p>
<pre>
  any opacity value given in the color name.
</pre>
<p>
@return [Integer] The color value. @raise [<a
href="Exception.html">ChunkyPNG::Exception</a>] If the color name was not
recognized.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000065-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000065-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 643</span>
643:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">html_color</span>(<span class="ruby-identifier">color_name</span>, <span class="ruby-identifier">opacity</span> = <span class="ruby-keyword kw">nil</span>)
644:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">color_name</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">=~</span> <span class="ruby-constant">HTML_COLOR_REGEXP</span>
645:         <span class="ruby-identifier">opacity</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">$2</span> <span class="ruby-operator">?</span> (<span class="ruby-identifier">$2</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">*</span> <span class="ruby-value">255.0</span>).<span class="ruby-identifier">round</span> <span class="ruby-operator">:</span> <span class="ruby-value">0xff</span>
646:         <span class="ruby-identifier">base_color_name</span> = <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/[^a-z]+/i</span>, <span class="ruby-value str">''</span>).<span class="ruby-identifier">downcase</span>.<span class="ruby-identifier">to_sym</span>
647:         <span class="ruby-keyword kw">return</span> <span class="ruby-constant">PREDEFINED_COLORS</span>[<span class="ruby-identifier">base_color_name</span>] <span class="ruby-operator">|</span> <span class="ruby-identifier">opacity</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">PREDEFINED_COLORS</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">base_color_name</span>)
648:       <span class="ruby-keyword kw">end</span>
649:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Unknown color name #{color_name}!&quot;</span>
650:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000047" class="method-detail">
        <a name="M000047"></a>

        <div class="method-heading">
          <a href="#M000047" class="method-signature">
          <span class="method-name">int8_mult</span><span class="method-args">(a, b)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Multiplies two fractions using integer math, where the fractions are stored
using an integer between 0 and 255. This method is used as <a
href="Color.html#M000042">a</a> helper method for compositing colors using
integer math.
</p>
<p>
This is <a href="Color.html#M000042">a</a> quicker implementation of ((<a
href="Color.html#M000042">a</a> * <a href="Color.html#M000041">b</a>) /
255.0).round.
</p>
<p>
@param [Integer] <a href="Color.html#M000042">a</a> The first fraction.
@param [Integer] <a href="Color.html#M000041">b</a> The second fraction.
@return [Integer] The result of the multiplication.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000047-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000047-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 245</span>
245:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span>)
246:       <span class="ruby-identifier">t</span> = <span class="ruby-identifier">a</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">b</span> <span class="ruby-operator">+</span> <span class="ruby-value">0x80</span>
247:       ((<span class="ruby-identifier">t</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">8</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">t</span>) <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">8</span>
248:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000044" class="method-detail">
        <a name="M000044"></a>

        <div class="method-heading">
          <a href="#M000044" class="method-signature">
          <span class="method-name">opaque!</span><span class="method-args">(value)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the opaque value of this color by removing the alpha channel.
@param [Integer] value The color to transform. @return [Integer] The opaque
color
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000044-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000044-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 212</span>
212:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">opaque!</span>(<span class="ruby-identifier">value</span>)
213:       <span class="ruby-identifier">value</span> <span class="ruby-operator">|</span> <span class="ruby-value">0x000000ff</span>
214:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000043" class="method-detail">
        <a name="M000043"></a>

        <div class="method-heading">
          <a href="#M000043" class="method-signature">
          <span class="method-name">opaque?</span><span class="method-args">(value)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns true if this color is fully opaque.
</p>
<p>
@param [Integer] value The color to test. @return [true, false] True if the
alpha channel equals MAX.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000043-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000043-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 205</span>
205:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">opaque?</span>(<span class="ruby-identifier">value</span>)
206:       <span class="ruby-identifier">a</span>(<span class="ruby-identifier">value</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0x000000ff</span>
207:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000031" class="method-detail">
        <a name="M000031"></a>

        <div class="method-heading">
          <a href="#M000031" class="method-signature">
          <span class="method-name">parse</span><span class="method-args">(source)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Parses <a href="Color.html#M000042">a</a> color value given <a
href="Color.html#M000042">a</a> numeric or string argument.
</p>
<p>
It supports color numbers, colors in hex notation and named HTML colors.
</p>
<p>
@param [Integer, <a href="../String.html">String</a>] The color value.
@return [Integer] The color value, with the opacity applied if one was
given.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000031-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000031-source">
<pre>
    <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 76</span>
76:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>)
77:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">source</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">source</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Integer</span>)
78:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">source</span>.<span class="ruby-identifier">to_s</span>
79:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\d+$/</span>; <span class="ruby-identifier">source</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">to_i</span>
80:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">ChunkyPNG</span><span class="ruby-operator">::</span><span class="ruby-constant">Color</span><span class="ruby-operator">::</span><span class="ruby-constant">HEX_COLOR_REGEXP</span>;  <span class="ruby-constant">ChunkyPNG</span><span class="ruby-operator">::</span><span class="ruby-constant">Color</span>.<span class="ruby-identifier">from_hex</span>(<span class="ruby-identifier">source</span>.<span class="ruby-identifier">to_s</span>)
81:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">ChunkyPNG</span><span class="ruby-operator">::</span><span class="ruby-constant">Color</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML_COLOR_REGEXP</span>; <span class="ruby-constant">ChunkyPNG</span><span class="ruby-operator">::</span><span class="ruby-constant">Color</span>.<span class="ruby-identifier">html_color</span>(<span class="ruby-identifier">source</span>.<span class="ruby-identifier">to_s</span>)
82:         <span class="ruby-keyword kw">else</span> <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Don't know how to create a color from #{source.inspect}!&quot;</span>
83:       <span class="ruby-keyword kw">end</span>
84:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000070" class="method-detail">
        <a name="M000070"></a>

        <div class="method-heading">
          <a href="#M000070" class="method-signature">
          <span class="method-name">pass_bytesize</span><span class="method-args">(color_mode, depth, width, height)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the number of bytes used for an image pass @param [Integer]
color_mode The color mode in which the pixels are stored. @param [Integer]
depth The color depth of the pixels. @param [Integer] width The width of
the image pass. @param [Integer] width The height of the image pass.
@return [Integer] The number of bytes used per scanline in <a
href="Color.html#M000042">a</a> datastream.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000070-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000070-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 710</span>
710:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pass_bytesize</span>(<span class="ruby-identifier">color_mode</span>, <span class="ruby-identifier">depth</span>, <span class="ruby-identifier">width</span>, <span class="ruby-identifier">height</span>)
711:       <span class="ruby-keyword kw">return</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">width</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">height</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
712:       (<span class="ruby-identifier">scanline_bytesize</span>(<span class="ruby-identifier">color_mode</span>, <span class="ruby-identifier">depth</span>, <span class="ruby-identifier">width</span>) <span class="ruby-operator">+</span> <span class="ruby-value">1</span>) <span class="ruby-operator">*</span> <span class="ruby-identifier">height</span>
713:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000068" class="method-detail">
        <a name="M000068"></a>

        <div class="method-heading">
          <a href="#M000068" class="method-signature">
          <span class="method-name">pixel_bitsize</span><span class="method-args">(color_mode, depth = 8)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the size in bits of <a href="Color.html#M000042">a</a> pixel when
it is stored using <a href="Color.html#M000042">a</a> given color mode.
@param [Integer] color_mode The color mode in which the pixels are stored.
@param [Integer] depth The color depth of the pixels. @return [Integer] The
number of bytes used per pixel in <a href="Color.html#M000042">a</a>
datastream.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000068-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000068-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 691</span>
691:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pixel_bitsize</span>(<span class="ruby-identifier">color_mode</span>, <span class="ruby-identifier">depth</span> = <span class="ruby-value">8</span>)
692:       <span class="ruby-identifier">samples_per_pixel</span>(<span class="ruby-identifier">color_mode</span>) <span class="ruby-operator">*</span> <span class="ruby-identifier">depth</span>
693:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000067" class="method-detail">
        <a name="M000067"></a>

        <div class="method-heading">
          <a href="#M000067" class="method-signature">
          <span class="method-name">pixel_bytesize</span><span class="method-args">(color_mode, depth = 8)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the size in bytes of <a href="Color.html#M000042">a</a> pixel when
it is stored using <a href="Color.html#M000042">a</a> given color mode.
@param [Integer] color_mode The color mode in which the pixels are stored.
@return [Integer] The number of bytes used per pixel in <a
href="Color.html#M000042">a</a> datastream.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000067-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000067-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 682</span>
682:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pixel_bytesize</span>(<span class="ruby-identifier">color_mode</span>, <span class="ruby-identifier">depth</span> = <span class="ruby-value">8</span>)
683:       <span class="ruby-keyword kw">return</span> <span class="ruby-value">1</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">depth</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">8</span>
684:       (<span class="ruby-identifier">pixel_bitsize</span>(<span class="ruby-identifier">color_mode</span>, <span class="ruby-identifier">depth</span>) <span class="ruby-operator">+</span> <span class="ruby-value">7</span>) <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">3</span>
685:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000039" class="method-detail">
        <a name="M000039"></a>

        <div class="method-heading">
          <a href="#M000039" class="method-signature">
          <span class="method-name">r</span><span class="method-args">(value)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the red-component from the color value.
</p>
<p>
@param [Integer] value The color value. @return [Integer] A value between 0
and MAX.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000039-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000039-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 173</span>
173:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">r</span>(<span class="ruby-identifier">value</span>)
174:       (<span class="ruby-identifier">value</span> <span class="ruby-operator">&amp;</span> <span class="ruby-value">0xff000000</span>) <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">24</span>
175:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000033" class="method-detail">
        <a name="M000033"></a>

        <div class="method-heading">
          <a href="#M000033" class="method-signature">
          <span class="method-name">rgb</span><span class="method-args">(r, g, b)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates <a href="Color.html#M000042">a</a> new color using an <a
href="Color.html#M000039">r</a>, <a href="Color.html#M000040">g</a>, <a
href="Color.html#M000041">b</a> triple. @param [Integer] <a
href="Color.html#M000039">r</a> The <a
href="Color.html#M000039">r</a>-component (0-255) @param [Integer] <a
href="Color.html#M000040">g</a> The <a
href="Color.html#M000040">g</a>-component (0-255) @param [Integer] <a
href="Color.html#M000041">b</a> The <a
href="Color.html#M000041">b</a>-component (0-255) @return [Integer] The
newly constructed color value.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000033-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000033-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 101</span>
101:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rgb</span>(<span class="ruby-identifier">r</span>, <span class="ruby-identifier">g</span>, <span class="ruby-identifier">b</span>)
102:       <span class="ruby-identifier">r</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">24</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">g</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">16</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">b</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">8</span> <span class="ruby-operator">|</span> <span class="ruby-value">0xff</span>
103:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000032" class="method-detail">
        <a name="M000032"></a>

        <div class="method-heading">
          <a href="#M000032" class="method-signature">
          <span class="method-name">rgba</span><span class="method-args">(r, g, b, a)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates <a href="Color.html#M000042">a</a> new color using an <a
href="Color.html#M000039">r</a>, <a href="Color.html#M000040">g</a>, <a
href="Color.html#M000041">b</a> triple and an alpha value. @param [Integer]
<a href="Color.html#M000039">r</a> The <a
href="Color.html#M000039">r</a>-component (0-255) @param [Integer] <a
href="Color.html#M000040">g</a> The <a
href="Color.html#M000040">g</a>-component (0-255) @param [Integer] <a
href="Color.html#M000041">b</a> The <a
href="Color.html#M000041">b</a>-component (0-255) @param [Integer] <a
href="Color.html#M000042">a</a> The opacity (0-255) @return [Integer] The
newly constructed color value.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000032-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000032-source">
<pre>
    <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 92</span>
92:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rgba</span>(<span class="ruby-identifier">r</span>, <span class="ruby-identifier">g</span>, <span class="ruby-identifier">b</span>, <span class="ruby-identifier">a</span>)
93:       <span class="ruby-identifier">r</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">24</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">g</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">16</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">b</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">8</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">a</span>
94:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000066" class="method-detail">
        <a name="M000066"></a>

        <div class="method-heading">
          <a href="#M000066" class="method-signature">
          <span class="method-name">samples_per_pixel</span><span class="method-args">(color_mode)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the number of sample values per pixel. @param [Integer] color_mode
The color mode being used. @return [Integer] The number of sample values
per pixel.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000066-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000066-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 668</span>
668:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">samples_per_pixel</span>(<span class="ruby-identifier">color_mode</span>)
669:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">color_mode</span>
670:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">ChunkyPNG</span><span class="ruby-operator">::</span><span class="ruby-constant">COLOR_INDEXED</span>;         <span class="ruby-value">1</span>
671:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">ChunkyPNG</span><span class="ruby-operator">::</span><span class="ruby-constant">COLOR_TRUECOLOR</span>;       <span class="ruby-value">3</span>
672:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">ChunkyPNG</span><span class="ruby-operator">::</span><span class="ruby-constant">COLOR_TRUECOLOR_ALPHA</span>; <span class="ruby-value">4</span>
673:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">ChunkyPNG</span><span class="ruby-operator">::</span><span class="ruby-constant">COLOR_GRAYSCALE</span>;       <span class="ruby-value">1</span>
674:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">ChunkyPNG</span><span class="ruby-operator">::</span><span class="ruby-constant">COLOR_GRAYSCALE_ALPHA</span>; <span class="ruby-value">2</span>
675:         <span class="ruby-keyword kw">else</span> <span class="ruby-identifier">raise</span> <span class="ruby-constant">ChunkyPNG</span><span class="ruby-operator">::</span><span class="ruby-constant">NotSupported</span>, <span class="ruby-node">&quot;Don't know the numer of samples for this colormode: #{color_mode}!&quot;</span>
676:       <span class="ruby-keyword kw">end</span>
677:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000069" class="method-detail">
        <a name="M000069"></a>

        <div class="method-heading">
          <a href="#M000069" class="method-signature">
          <span class="method-name">scanline_bytesize</span><span class="method-args">(color_mode, depth, width)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the number of bytes used per scanline. @param [Integer] color_mode
The color mode in which the pixels are stored. @param [Integer] depth The
color depth of the pixels. @param [Integer] width The number of pixels per
scanline. @return [Integer] The number of bytes used per scanline in <a
href="Color.html#M000042">a</a> datastream.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000069-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000069-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 700</span>
700:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">scanline_bytesize</span>(<span class="ruby-identifier">color_mode</span>, <span class="ruby-identifier">depth</span>, <span class="ruby-identifier">width</span>)
701:       ((<span class="ruby-identifier">pixel_bitsize</span>(<span class="ruby-identifier">color_mode</span>, <span class="ruby-identifier">depth</span>) <span class="ruby-operator">*</span> <span class="ruby-identifier">width</span>) <span class="ruby-operator">+</span> <span class="ruby-value">7</span>) <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">3</span>
702:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000053" class="method-detail">
        <a name="M000053"></a>

        <div class="method-heading">
          <a href="#M000053" class="method-signature">
          <span class="method-name">to_grayscale</span><span class="method-args">(color)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Converts <a href="Color.html#M000042">a</a> color to <a
href="Color.html#M000042">a</a> fiting <a
href="Color.html#M000034">grayscale</a> value. It will conserve the alpha
channel.
</p>
<p>
This method will return <a href="Color.html#M000042">a</a> full color
value, with the R, G, and B value set to the <a
href="Color.html#M000034">grayscale</a> teint calcuated from the input
color&#8216;s R, G and B values.
</p>
<p>
@param [Integer] color The color to convert. @return [Integer] The input
color, converted to the best fitting <a
href="Color.html#M000034">grayscale</a>. @see <a
href="Color.html#M000052">grayscale_teint</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000053-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000053-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 325</span>
325:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_grayscale</span>(<span class="ruby-identifier">color</span>)
326:       <span class="ruby-identifier">grayscale_alpha</span>(<span class="ruby-identifier">grayscale_teint</span>(<span class="ruby-identifier">color</span>), <span class="ruby-identifier">a</span>(<span class="ruby-identifier">color</span>))
327:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000064" class="method-detail">
        <a name="M000064"></a>

        <div class="method-heading">
          <a href="#M000064" class="method-signature">
          <span class="method-name">to_grayscale_alpha_bytes</span><span class="method-args">(color)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns an array with the <a href="Color.html#M000034">grayscale</a> teint
and alpha channel values for this color.
</p>
<p>
This method expects the color to be <a
href="Color.html#M000034">grayscale</a>, i.e. <a
href="Color.html#M000039">r</a>,<a href="Color.html#M000040">g</a> and <a
href="Color.html#M000041">b</a> value to be equal and uses only the B
channel. If you need to convert <a href="Color.html#M000042">a</a> color to
<a href="Color.html#M000034">grayscale</a> first, see {<a
href="Color.html#M000053">to_grayscale</a>}.
</p>
<p>
@param [Integer] color The <a href="Color.html#M000034">grayscale</a> color
to convert. @return [Array&lt;Integer&gt;] An array with 2 Integer
elements. @see to_grascale
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000064-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000064-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 468</span>
468:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_grayscale_alpha_bytes</span>(<span class="ruby-identifier">color</span>)
469:       [<span class="ruby-identifier">b</span>(<span class="ruby-identifier">color</span>), <span class="ruby-identifier">a</span>(<span class="ruby-identifier">color</span>)] <span class="ruby-comment cmt"># assumption r == g == b</span>
470:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000063" class="method-detail">
        <a name="M000063"></a>

        <div class="method-heading">
          <a href="#M000063" class="method-signature">
          <span class="method-name">to_grayscale_bytes</span><span class="method-args">(color)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns an array with the <a href="Color.html#M000034">grayscale</a> teint
value for this color.
</p>
<p>
This method expects the <a href="Color.html#M000039">r</a>,<a
href="Color.html#M000040">g</a> and <a href="Color.html#M000041">b</a>
value to be equal, and the alpha channel will be discarded.
</p>
<p>
@param [Integer] color The <a href="Color.html#M000034">grayscale</a> color
to convert. @return [Array&lt;Integer&gt;] An array with 1 Integer element.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000063-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000063-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 454</span>
454:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_grayscale_bytes</span>(<span class="ruby-identifier">color</span>)
455:       [<span class="ruby-identifier">b</span>(<span class="ruby-identifier">color</span>)] <span class="ruby-comment cmt"># assumption r == g == b</span>
456:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000060" class="method-detail">
        <a name="M000060"></a>

        <div class="method-heading">
          <a href="#M000060" class="method-signature">
          <span class="method-name">to_hex</span><span class="method-args">(color, include_alpha = true)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns <a href="Color.html#M000042">a</a> string representing this color
using hex notation (i.e. rrggbbaa).
</p>
<p>
@param [Integer] value The color to convert. @return [<a
href="../String.html">String</a>] The color in hex notation, starting with
<a href="Color.html#M000042">a</a> pound sign.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000060-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000060-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 426</span>
426:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_hex</span>(<span class="ruby-identifier">color</span>, <span class="ruby-identifier">include_alpha</span> = <span class="ruby-keyword kw">true</span>)
427:       <span class="ruby-identifier">include_alpha</span> <span class="ruby-value">? </span>(<span class="ruby-value str">'#%08x'</span> <span class="ruby-operator">%</span> <span class="ruby-identifier">color</span>) <span class="ruby-operator">:</span> (<span class="ruby-value str">'#%06x'</span> <span class="ruby-operator">%</span> [<span class="ruby-identifier">color</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">8</span>])
428:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000061" class="method-detail">
        <a name="M000061"></a>

        <div class="method-heading">
          <a href="#M000061" class="method-signature">
          <span class="method-name">to_truecolor_alpha_bytes</span><span class="method-args">(color)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns an array with the separate RGBA values for this color.
</p>
<p>
@param [Integer] color The color to convert. @return [Array&lt;Integer&gt;]
An array with 4 Integer elements.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000061-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000061-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 434</span>
434:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_truecolor_alpha_bytes</span>(<span class="ruby-identifier">color</span>)
435:       [<span class="ruby-identifier">r</span>(<span class="ruby-identifier">color</span>), <span class="ruby-identifier">g</span>(<span class="ruby-identifier">color</span>), <span class="ruby-identifier">b</span>(<span class="ruby-identifier">color</span>), <span class="ruby-identifier">a</span>(<span class="ruby-identifier">color</span>)]
436:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000062" class="method-detail">
        <a name="M000062"></a>

        <div class="method-heading">
          <a href="#M000062" class="method-signature">
          <span class="method-name">to_truecolor_bytes</span><span class="method-args">(color)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns an array with the separate RGB values for this color. The alpha
channel will be discarded.
</p>
<p>
@param [Integer] color The color to convert. @return [Array&lt;Integer&gt;]
An array with 3 Integer elements.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000062-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000062-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 443</span>
443:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_truecolor_bytes</span>(<span class="ruby-identifier">color</span>)
444:       [<span class="ruby-identifier">r</span>(<span class="ruby-identifier">color</span>), <span class="ruby-identifier">g</span>(<span class="ruby-identifier">color</span>), <span class="ruby-identifier">b</span>(<span class="ruby-identifier">color</span>)]
445:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>